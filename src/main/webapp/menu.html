<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!-- google fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Funnel+Display:wght@300..800&family=Hurricane&family=Lexend+Deca:wght@100..900&family=Noto+Sans+Display:ital,wght@0,100..900;1,100..900&family=Nunito:ital,wght@0,200..1000;1,200..1000&family=Playfair+Display:ital,wght@0,400..900;1,400..900&family=Radio+Canada:ital,wght@0,300..700;1,300..700&display=swap"
      rel="stylesheet"
    />

    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css"
      rel="stylesheet"
      xintegrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB"
      crossorigin="anonymous"
    />

    <link rel="stylesheet" href="css/styles.css" />
    <link rel="stylesheet" href="css/dining.css" />
    
    <title>Coastal Haven - {{restaurant_name}} Menu</title>
  </head>
  <body>
    <header class="px-4 pt-2 pb-5 mb-5 text-center dining-header">
      <nav class="navbar navbar-expand-lg bg-body-transparent pb-5">
        <div class="container-fluid">
          <a class="navbar-brand" href="index.html"
            ><img src="" alt="" width="50"
          /></a>
          <button
            class="navbar-toggler filterTertiaryFromBlack"
            type="button"
            data-bs-toggle="collapse"
            data-bs-target="#navbarNavAltMarkup"
            aria-controls="navbarNavAltMarkup"
            aria-expanded="false"
            aria-label="Toggle navigation"
          >
            <span class="navbar-toggler-icon"></span>
          </button>
          <div
            class="collapse navbar-collapse justify-content-center"
            id="navbarNavAltMarkup"
          >
            <div class="navbar-nav">
              <a class="nav-link mx-3" href="index.html">Home</a>
              <a class="nav-link mx-3" href="rooms.html">Rooms</a>
              <a class="nav-link mx-3" href="facilities.html">Facilities</a>
              <a class="nav-link mx-3 active" aria-current="page" href="dining">Dining</a>
              <a class="nav-link mx-3" href="contactus.html">Contact Us</a>
              {{login_link}}
            </div>
          </div>
        </div>
      </nav>
      
      <h1 class="mt-5 main-heading">{{restaurant_name}}</h1>
    </header>
    
    <!-- Place your code after this line -->

    <section class="container pb-5">
        <div class="mb-4 d-flex justify-content-between align-items-center">
             <a class="btn btn-outline-secondary" href="dining">← Back to Dining</a>
             
             {{add_item_button}}
             
        </div>
        
        <div class="row g-4">
            
            {{menu_list}}
            
        </div>
    </section>

    {{add_item_form}}
    
    <div class="modal fade" id="editMenuItemModal" tabindex="-1" aria-hidden="true">
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
          <div class="modal-header bg-light">
            <h5 class="modal-title dark-header">Edit Menu Item</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
          </div>
          <div class="modal-body">
            <form action="menu" method="POST" id="editForm">
              <input type="hidden" name="action" value="update">
              <input type="hidden" name="menu_id" id="edit-id">
              <input type="hidden" name="restaurant_id" id="edit-rest-id">
              
              <div class="mb-3">
                <label class="form-label small text-muted">Item Name</label>
                <input type="text" name="item_name" id="edit-name" class="form-control" required>
              </div>
              <div class="mb-3">
                <label class="form-label small text-muted">Category</label>
                <select name="category" id="edit-cat" class="form-select">
                    <option value="Starter">Starter</option>
                    <option value="Main">Main</option>
                    <option value="Dessert">Dessert</option>
                    <option value="Drink">Drink</option>
                    <option value="Pass">Pass</option>
                </select>
              </div>
              <div class="mb-3">
                <label class="form-label small text-muted">Price (AED)</label>
                <input type="number" name="price" id="edit-price" class="form-control" step="0.01" required>
              </div>
              <div class="mb-3">
                <label class="form-label small text-muted">Description</label>
                <textarea name="description" id="edit-desc" class="form-control" rows="2" required></textarea>
              </div>
              <button type="submit" class="btn btn-warning w-100">Save Changes</button>
            </form>
          </div>
        </div>
      </div>
    </div>

    <!-- Place your code before this line -->
    <div class="container-fluid footer-container">
      <footer class="py-3 mt-4">
        <ul class="nav justify-content-center border-bottom pb-3 mb-3">
          <li class="nav-item">
            <a href="index.html" class="nav-link px-3 mx-2">Home</a>
          </li>
          <li class="nav-item">
            <a href="#" class="nav-link px-3 mx-2">Features</a>
          </li>
          <li class="nav-item">
            <a href="#" class="nav-link px-3 mx-2">Pricing</a>
          </li>
          <li class="nav-item">
            <a href="#" class="nav-link px-3 mx-2">FAQs</a>
          </li>
          <li class="nav-item">
            <a href="#" class="nav-link px-3 mx-2">About</a>
          </li>
        </ul>
        <p class="text-center">© 2025 Beach Resort, Inc</p>
      </footer>
    </div>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"
      xintegrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI"
      crossorigin="anonymous"
    ></script>
    
    <!-- small javascript to autofill the fields for the edit item form -->
    <script>
        const editModal = document.getElementById('editMenuItemModal')
        editModal.addEventListener('show.bs.modal', event => {
          const button = event.relatedTarget
          
          const id = button.getAttribute('data-id')
          const restId = button.getAttribute('data-restaurant')
          const name = button.getAttribute('data-name')
          const price = button.getAttribute('data-price')
          const category = button.getAttribute('data-cat')
          const desc = button.getAttribute('data-desc')
          
          document.getElementById('edit-id').value = id
          document.getElementById('edit-rest-id').value = restId
          document.getElementById('edit-name').value = name
          document.getElementById('edit-price').value = price
          document.getElementById('edit-cat').value = category
          document.getElementById('edit-desc').value = desc
        })
    </script>
  </body>
</html>